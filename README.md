# Geo42

> ğŸŒ A modern geospatial database built with Rust

[![Rust](https://img.shields.io/badge/rust-1.70+-orange.svg)](https://www.rust-lang.org)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Build Status](https://img.shields.io/badge/build-passing-brightgreen.svg)]()

Geo42 æ˜¯ä¸€ä¸ªåŸºäº RTree é«˜æ€§èƒ½çš„åœ°ç†ç©ºé—´ç´¢å¼•æœåŠ¡ï¼Œæ—¨åœ¨æä¾›æœ€ä¼˜ç§€çš„æ€§èƒ½å’Œä½¿ç”¨ä½“éªŒã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: ç›®å‰åŸºäº RTree æ€§èƒ½æœ€å¥½çš„ç©ºé—´ç´¢å¼•æœåŠ¡
- ğŸ”’ **å†…å­˜å®‰å…¨**: Rust ç±»å‹ç³»ç»Ÿä¿è¯å†…å­˜å®‰å…¨  
- âš¡ **é«˜å¹¶å‘**: åŸç”Ÿå¼‚æ­¥æ”¯æŒ
- ğŸŒ **åè®®å…¼å®¹**: æ”¯æŒ RESP åè®®ï¼ˆRedis å…¼å®¹ï¼‰
- ğŸ“ **ç©ºé—´ç´¢å¼•**: é›†æˆ R-tree ç©ºé—´ç´¢å¼•
- ğŸ› ï¸ **å¼€å‘å‹å¥½**: æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å’Œç°ä»£åŒ–å·¥å…·

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# ä»æºç æ„å»º
git clone https://github.com/your-org/geo42.git
cd geo42
cargo build --release
```

### å¯åŠ¨æœåŠ¡å™¨

```bash
# å¯åŠ¨ Geo42 æœåŠ¡å™¨
cargo run --bin geo42-server
# æœåŠ¡å™¨å°†åœ¨ 127.0.0.1:9851 å¯åŠ¨
```

### ä½¿ç”¨å®¢æˆ·ç«¯

```bash
# äº¤äº’æ¨¡å¼
cargo run --bin geo42-cli -- --interactive

# ç›´æ¥æ‰§è¡Œå‘½ä»¤
cargo run --bin geo42-cli -- PING
cargo run --bin geo42-cli -- SET fleet truck1 '{"type":"Point","coordinates":[116.3,39.9]}'
cargo run --bin geo42-cli -- GET fleet truck1
```

## ğŸ“– åŸºç¡€ç”¨æ³•

### å­˜å‚¨åœ°ç†ç©ºé—´æ•°æ®

```bash
# å­˜å‚¨ä¸€ä¸ªç‚¹
SET fleet truck1 {"type":"Point","coordinates":[116.3974,39.9093]}

# å­˜å‚¨ä¸€ä¸ªå¤šè¾¹å½¢
SET boundaries beijing {
  "type": "Polygon",
  "coordinates": [[
    [116.0,39.5], [117.0,39.5], 
    [117.0,40.5], [116.0,40.5], 
    [116.0,39.5]
  ]]
}
```

### æŸ¥è¯¢æ•°æ®

```bash
# è·å–å¯¹è±¡
GET fleet truck1

# æµ‹è¯•è¿æ¥
PING
```

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Geo42-CLI     â”‚    â”‚   Your App      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ RESP Protocol
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚    Geo42 Server      â”‚
          â”‚                      â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
          â”‚  â”‚ Command System  â”‚ â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
          â”‚  â”‚ Storage Engine  â”‚ â”‚
          â”‚  â”‚   + R-tree      â”‚ â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›£ï¸ å¼€å‘è·¯çº¿

æŸ¥çœ‹æˆ‘ä»¬çš„è¯¦ç»† [è·¯çº¿å›¾](ROADMAP.md) äº†è§£é¡¹ç›®è®¡åˆ’å’Œè¿›å±•ã€‚

### å½“å‰çŠ¶æ€

- âœ… åŸºç¡€å­˜å‚¨ç³»ç»Ÿ
- âœ… RESP åè®®æ”¯æŒ  
- âœ… R-tree ç©ºé—´ç´¢å¼•
- âœ… SET/GET å‘½ä»¤
- ğŸš§ ç©ºé—´æŸ¥è¯¢å‘½ä»¤ (è¿›è¡Œä¸­)
- ğŸ“‹ æŒä¹…åŒ–ç³»ç»Ÿ (è®¡åˆ’ä¸­)


## ğŸ“š æ–‡æ¡£

- [API æ–‡æ¡£](docs/api.md)
- [é…ç½®æŒ‡å—](docs/configuration.md)
- [éƒ¨ç½²æŒ‡å—](docs/deployment.md)
- [å¼€å‘æŒ‡å—](docs/development.md)

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
cargo test storage::tests

# è¿è¡ŒåŸºå‡†æµ‹è¯•
cargo bench
```

## ğŸ“Š æ€§èƒ½

### æ€§èƒ½å¯¹æ¯”æµ‹è¯•ç»“æœ

ä¸ Tile38 çš„æ€§èƒ½å¯¹æ¯”æµ‹è¯•ï¼ˆ10ä¸‡æ¡æ•°æ®ï¼Œ1ä¸‡æ¬¡æŸ¥è¯¢ï¼Œ100å¹¶å‘ï¼ŒOn my macbook pro M2 16Gï¼‰ï¼š

| æŒ‡æ ‡ | Geo42 | Tile38 | æ€§èƒ½æå‡ |
|------|-------|--------|----------|
| æŸ¥è¯¢æˆåŠŸæ•° | 10,000 | 10,000 | - |
| **QPS** | **320.18** | **68.89** | **4.65x** |
| **å¹³å‡å»¶è¿Ÿ** | **264.82ms** | **1,376.88ms** | **5.20x æ›´å¿«** |
| **ä¸­ä½æ•°å»¶è¿Ÿ** | **254.94ms** | **694.66ms** | **2.72x æ›´å¿«** |
| **P95å»¶è¿Ÿ** | **451.01ms** | **2,252.80ms** | **5.00x æ›´å¿«** |
| æœ€å°å»¶è¿Ÿ | 18.76ms | 7.85ms | - |
| æœ€å¤§å»¶è¿Ÿ | 839.51ms | 41,865.64ms | - |

### æµ‹è¯•é…ç½®

```python
benchmark.run_benchmark(
    data_count=100000,    # 10ä¸‡æ¡æ•°æ®
    query_count=10000,    # 1ä¸‡æ¬¡æŸ¥è¯¢
    max_workers=100       # 100 å¹¶å‘
)
```

### æ€§èƒ½äº®ç‚¹

- ğŸš€ **QPS æå‡ 4.65å€**: Geo42 è¾¾åˆ° 320+ QPSï¼Œè¿œè¶… Tile38 çš„ 68.89 QPS
- âš¡ **å»¶è¿Ÿé™ä½ 5.2å€**: å¹³å‡æŸ¥è¯¢å»¶è¿Ÿä»…ä¸º Tile38 çš„ 1/5
- ï¿½ **ç¨³å®šæ€§æ›´å¥½**: P95å»¶è¿Ÿæ§åˆ¶åœ¨ 451msï¼Œè€Œ Tile38 è¶…è¿‡ 2.2s
- ğŸ’ª **é«˜å¹¶å‘è¡¨ç°**: åœ¨ 100 å¹¶å‘ä¸‹ä»ä¿æŒä¼˜å¼‚æ€§èƒ½

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [Tile38](https://tile38.com/) - å¯¹æ ‡æ¥æº
- [Rust ç¤¾åŒº](https://www.rust-lang.org/community) - ä¼˜ç§€çš„å·¥å…·å’Œåº“
- æ‰€æœ‰è´¡çŒ®è€…å’Œæ”¯æŒè€…

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**
